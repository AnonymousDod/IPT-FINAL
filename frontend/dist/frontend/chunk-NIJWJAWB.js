import{a as q,b as z}from"./chunk-7FSPOTPR.js";import{A as r,Ba as U,Ca as O,E,F as m,Fa as H,G as p,Ha as y,K as a,Ka as A,L as f,M as D,Y as F,Z as S,ca as N,ea as V,ka as L,m as j,ma as $,n as g,o as T,p as v,pa as R,q as b,r as C,s as x,u as s,v as c,x as u,y as l,z as o}from"./chunk-AFLXQZBF.js";import{a as w}from"./chunk-2XJVAMHT.js";var M=(()=>{class e{constructor(t){this.http=t,this.apiUrl=`${q.apiUrl}/departments`}getAll(){return this.http.get(this.apiUrl)}delete(t){return this.http.delete(`${this.apiUrl}/${t}`)}create(t){return this.http.post(this.apiUrl,t)}update(t,i){return this.http.put(`${this.apiUrl}/${t}`,i)}static{this.\u0275fac=function(i){return new(i||e)(T(V))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Q(e,_){if(e&1){let t=E();o(0,"button",9),m("click",function(){C(t);let n=p().$implicit,d=p();return x(d.delete(n.id))}),a(1,"Delete"),r()}}function W(e,_){if(e&1){let t=E();o(0,"tr")(1,"td"),a(2),r(),o(3,"td"),a(4),r(),o(5,"td"),a(6),r(),o(7,"td")(8,"button",7),m("click",function(){let d=C(t).$implicit,h=p();return x(h.edit(d.id))}),a(9,"Edit"),r(),u(10,Q,2,0,"button",8),r()()}if(e&2){let t=_.$implicit,i=p(),n;s(2),f(t.name),s(2),f(t.description),s(2),f(t.employeeCount),s(4),l("ngIf",((n=i.account())==null?null:n.role)==="Admin")}}function X(e,_){if(e&1){let t=E();o(0,"button",10),m("click",function(){C(t);let n=p();return x(n.add())}),a(1,"Add Department"),r()}}var G=(()=>{class e{constructor(t,i,n){this.departmentService=t,this.accountService=i,this.router=n,this.departments=[]}ngOnInit(){this.departmentService.getAll().subscribe(t=>this.departments=t)}account(){return this.accountService.accountValue}edit(t){this.router.navigate(["/departments/edit",t])}delete(t){this.departmentService.delete(t).subscribe(()=>{this.departments=this.departments.filter(i=>i.id!==t)})}add(){this.router.navigate(["/departments/add"])}static{this.\u0275fac=function(i){return new(i||e)(c(M),c(z),c(y))}}static{this.\u0275cmp=v({type:e,selectors:[["app-department-list"]],decls:19,vars:2,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["class","btn btn-primary float-end",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary","me-1",3,"click"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"btn","btn-primary","float-end",3,"click"]],template:function(i,n){if(i&1&&(o(0,"div",0)(1,"div",1),a(2,"Departments"),r(),o(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead")(7,"tr")(8,"th"),a(9,"Name"),r(),o(10,"th"),a(11,"Description"),r(),o(12,"th"),a(13,"Employee Count"),r(),o(14,"th"),a(15,"Actions"),r()()(),o(16,"tbody"),u(17,W,11,4,"tr",5),r()()(),u(18,X,2,0,"button",6),r()()),i&2){let d;s(17),l("ngForOf",n.departments),s(1),l("ngIf",((d=n.account())==null?null:d.role)==="Admin")}},dependencies:[F,S],encapsulation:2})}}return e})();function Y(e,_){if(e&1&&(o(0,"div",10),a(1),r()),e&2){let t=p();s(1),f(t.errorMessage)}}var k=(()=>{class e{constructor(t,i,n){this.route=t,this.router=i,this.departmentService=n,this.department={},this.errorMessage=""}ngOnInit(){this.id=this.route.snapshot.params.id,this.id&&this.departmentService.getAll().subscribe(t=>{let i=t.find(n=>n.id==this.id);i&&(this.department=w({},i))})}save(){this.id?this.departmentService.update(this.id,this.department).subscribe({next:()=>this.router.navigate(["/departments"]),error:t=>this.errorMessage=t.error?.message||"Error updating department"}):this.departmentService.create(this.department).subscribe({next:()=>this.router.navigate(["/departments"]),error:t=>this.errorMessage=t.error?.message||"Error creating department"})}cancel(){this.router.navigate(["/departments"])}static{this.\u0275fac=function(i){return new(i||e)(c(H),c(y),c(M))}}static{this.\u0275cmp=v({type:e,selectors:[["app-department-add-edit"]],decls:18,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-center"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"alert","alert-danger"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"div",1),a(2),r(),o(3,"div",2),u(4,Y,2,1,"div",3),o(5,"div",4)(6,"label",5),a(7,"Name"),r(),o(8,"input",6),m("ngModelChange",function(h){return n.department.name=h}),r()(),o(9,"div",4)(10,"label",5),a(11,"Description"),r(),o(12,"input",6),m("ngModelChange",function(h){return n.department.description=h}),r()(),o(13,"div",7)(14,"button",8),m("click",function(){return n.save()}),a(15,"Save"),r(),o(16,"button",9),m("click",function(){return n.cancel()}),a(17,"Cancel"),r()()()()),i&2&&(s(2),D("",n.id?"Edit":"Add"," Department"),s(2),l("ngIf",n.errorMessage),s(4),l("ngModel",n.department.name),s(4),l("ngModel",n.department.description))},dependencies:[S,L,$,R],encapsulation:2})}}return e})();var Z=[{path:"",component:G},{path:"add",component:k},{path:"edit/:id",component:k}],J=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=b({type:e})}static{this.\u0275inj=g({imports:[A.forChild(Z),A]})}}return e})();var vt=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=b({type:e})}static{this.\u0275inj=g({imports:[N,U,O,J]})}}return e})();export{vt as DepartmentsModule};
