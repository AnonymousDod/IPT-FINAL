import"./chunk-W6F5HBGF.js";import{a as D}from"./chunk-IVTSPJUC.js";import{b as R}from"./chunk-5RCUSW7M.js";import{b as _}from"./chunk-7FSPOTPR.js";import{A as o,Aa as V,B as p,Ca as ae,E as B,F as b,Fa as T,G as u,Ga as se,Ha as P,I as Z,Ia as x,K as s,Ka as K,L as $,Q as g,X as S,Z as w,ca as ee,j as W,ja as te,k as h,ka as y,la as f,ma as M,n as A,na as O,p as v,q as j,qa as k,r as z,s as G,sa as I,ta as E,u as r,ua as ie,v as c,va as ne,w as X,wa as oe,x as m,y as a,z as n,za as re}from"./chunk-AFLXQZBF.js";import"./chunk-2XJVAMHT.js";var le=(()=>{class e{constructor(t,l){this.router=t,this.accountService=l,this.accountService.accountValue&&this.router.navigate(["/"])}static{this.\u0275fac=function(l){return new(l||e)(c(P),c(_))}}static{this.\u0275cmp=v({type:e,selectors:[["app-layout"]],decls:1,vars:0,template:function(l,i){l&1&&p(0,"router-outlet")},dependencies:[se],encapsulation:2})}}return e})();function _e(e,d){if(e&1){let t=B();n(0,"div",14),p(1,"i",15),n(2,"span"),s(3),o(),n(4,"button",16),b("click",function(){z(t);let i=u();return G(i.error="")}),o()()}if(e&2){let t=u();r(3),$(t.error)}}function Ce(e,d){e&1&&(n(0,"div"),s(1,"Email is required"),o())}function he(e,d){e&1&&(n(0,"div"),s(1,"Please enter a valid email"),o())}function be(e,d){if(e&1&&(n(0,"div",17),m(1,Ce,2,0,"div",18),m(2,he,2,0,"div",18),o()),e&2){let t=u();r(1),a("ngIf",t.f.email.errors==null?null:t.f.email.errors.required),r(1),a("ngIf",t.f.email.errors==null?null:t.f.email.errors.email)}}function we(e,d){e&1&&(n(0,"div"),s(1,"Password is required"),o())}function Pe(e,d){if(e&1&&(n(0,"div",17),m(1,we,2,0,"div",18),o()),e&2){let t=u();r(1),a("ngIf",t.f.password.errors==null?null:t.f.password.errors.required)}}function xe(e,d){e&1&&p(0,"span",19)}var me=function(e){return{"is-invalid":e}},de=(()=>{class e{constructor(t,l,i,C){this.formBuilder=t,this.route=l,this.router=i,this.accountService=C,this.loading=!1,this.submitted=!1,this.error="",this.showPassword=!1}ngOnInit(){this.form=this.formBuilder.group({email:["",[f.required,f.email]],password:["",f.required]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,!this.form.invalid&&(this.error="",this.loading=!0,this.accountService.login(this.f.email.value,this.f.password.value).pipe(h()).subscribe({next:()=>{let t=this.route.snapshot.queryParams.returnUrl||"/";this.router.navigateByUrl(t)},error:t=>{this.error=t,this.loading=!1}}))}static{this.\u0275fac=function(l){return new(l||e)(c(re),c(T),c(P),c(_))}}static{this.\u0275cmp=v({type:e,selectors:[["app-login"]],decls:21,vars:18,consts:[[1,"login-form",3,"formGroup","ngSubmit"],["class","alert alert-danger",4,"ngIf"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"password-field"],["id","password","formControlName","password","placeholder","Enter your password",1,"form-control",3,"type","ngClass"],["type","button",1,"toggle-password",3,"click"],[1,"fas"],[1,"forgot-link"],["routerLink","../forgot-password"],["type","submit",1,"btn-submit",3,"disabled"],["class","spinner",4,"ngIf"],[1,"account-link"],["routerLink","../register"],[1,"alert","alert-danger"],[1,"fas","fa-exclamation-circle"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner"]],template:function(l,i){l&1&&(n(0,"form",0),b("ngSubmit",function(){return i.onSubmit()}),n(1,"h3"),s(2,"Login"),o(),m(3,_e,5,1,"div",1),p(4,"input",2),m(5,be,3,2,"div",3),n(6,"div",4),p(7,"input",5),n(8,"button",6),b("click",function(){return i.showPassword=!i.showPassword}),p(9,"i",7),o()(),m(10,Pe,2,1,"div",3),n(11,"div",8)(12,"a",9),s(13,"Forgot Password?"),o()(),n(14,"button",10),m(15,xe,1,0,"span",11),s(16," Login "),o(),n(17,"div",12),s(18," Don't have an account? "),n(19,"a",13),s(20,"Create Account"),o()()()),l&2&&(a("formGroup",i.form),r(3),a("ngIf",i.error),r(1),a("ngClass",g(14,me,i.submitted&&i.f.email.errors)),r(1),a("ngIf",i.submitted&&i.f.email.errors),r(2),a("type",i.showPassword?"text":"password")("ngClass",g(16,me,i.submitted&&i.f.password.errors)),r(1),X("aria-label",i.showPassword?"Hide password":"Show password"),r(1),Z("fa-eye",!i.showPassword)("fa-eye-slash",i.showPassword),r(1),a("ngIf",i.submitted&&i.f.password.errors),r(4),a("disabled",i.loading),r(1),a("ngIf",i.loading))},dependencies:[S,w,k,y,M,O,I,E,x],styles:["[_nghost-%COMP%]{display:block;height:100vh;background:#f5f5f5;position:relative;margin:0;padding:0}.login-form[_ngcontent-%COMP%]{width:100%;max-width:320px;background:white;border-radius:8px;box-shadow:0 2px 10px #00000014;padding:1.5rem;margin:0 auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-sizing:border-box}.login-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#333;font-size:1.2rem;font-weight:600;margin-bottom:1.5rem;margin-top:0}.login-form[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{background:rgba(244,63,94,.08);border:1px solid rgba(244,63,94,.18);color:#f43f5e;border-radius:4px;padding:.75rem;margin-bottom:1rem;width:100%;font-size:.9rem}.login-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;background:#f9f9f9;border:1px solid #e0e0e0;border-radius:4px;padding:.75rem 1rem;color:#333;font-size:.9rem;margin-bottom:1rem;transition:all .2s ease;box-sizing:border-box}.login-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#999}.login-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#009688;outline:none;box-shadow:0 0 0 2px #0096881a}.login-form[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#f43f5e;background:rgba(244,63,94,.03)}.login-form[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]{position:relative;width:100%}.login-form[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;right:.6rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#999;cursor:pointer;padding:.25rem;z-index:2;height:2rem;width:2rem;display:flex;align-items:center;justify-content:center;transition:color .2s}.login-form[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#009688}.login-form[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:focus{outline:none}.login-form[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:#f43f5e;font-size:.8rem;margin-top:-.75rem;margin-bottom:.75rem;padding-left:.25rem}.login-form[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]{text-align:right;margin-bottom:1rem}.login-form[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;text-decoration:none;font-size:.85rem;transition:color .2s}.login-form[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#009688}.login-form[_ngcontent-%COMP%]   .account-link[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:.85rem;margin-top:1rem}.login-form[_ngcontent-%COMP%]   .account-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#009688;text-decoration:none;transition:all .2s}.login-form[_ngcontent-%COMP%]   .account-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#00635a;text-decoration:underline}.login-form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{width:100%;background:#009688;color:#fff;border:none;border-radius:4px;padding:.75rem;font-size:.95rem;font-weight:500;cursor:pointer;transition:all .2s}.login-form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover{background:#007d71;box-shadow:0 2px 5px #0000001a}.login-form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:active{transform:translateY(1px)}.login-form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:disabled{background:#00fce4;cursor:not-allowed;transform:none;box-shadow:none}.login-form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:inline-block;width:1rem;height:1rem;border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-right:.5rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 400px){.login-form[_ngcontent-%COMP%]{width:90%;padding:1.25rem}}"]})}}return e})();function Se(e,d){e&1&&(n(0,"div"),s(1,"Title is required"),o())}function ye(e,d){if(e&1&&(n(0,"div",19),m(1,Se,2,0,"div",20),o()),e&2){let t=u();r(1),a("ngIf",t.f.title.errors==null?null:t.f.title.errors.required)}}function Me(e,d){e&1&&(n(0,"div"),s(1,"Email is required"),o())}function Oe(e,d){e&1&&(n(0,"div"),s(1,"Please enter a valid email"),o())}function ke(e,d){if(e&1&&(n(0,"div",19),m(1,Me,2,0,"div",20),m(2,Oe,2,0,"div",20),o()),e&2){let t=u();r(1),a("ngIf",t.f.email.errors==null?null:t.f.email.errors.required),r(1),a("ngIf",t.f.email.errors==null?null:t.f.email.errors.email)}}function Ie(e,d){e&1&&(n(0,"div"),s(1,"First name is required"),o())}function Ee(e,d){if(e&1&&(n(0,"div",19),m(1,Ie,2,0,"div",20),o()),e&2){let t=u();r(1),a("ngIf",t.f.firstName.errors==null?null:t.f.firstName.errors.required)}}function Te(e,d){e&1&&(n(0,"div"),s(1,"Last name is required"),o())}function Re(e,d){if(e&1&&(n(0,"div",19),m(1,Te,2,0,"div",20),o()),e&2){let t=u();r(1),a("ngIf",t.f.lastName.errors==null?null:t.f.lastName.errors.required)}}function Ne(e,d){e&1&&(n(0,"div"),s(1,"Password is required"),o())}function Fe(e,d){e&1&&(n(0,"div"),s(1,"Password must be at least 6 characters"),o())}function Ve(e,d){if(e&1&&(n(0,"div",19),m(1,Ne,2,0,"div",20),m(2,Fe,2,0,"div",20),o()),e&2){let t=u();r(1),a("ngIf",t.f.password.errors==null?null:t.f.password.errors.required),r(1),a("ngIf",t.f.password.errors==null?null:t.f.password.errors.minlength)}}function qe(e,d){e&1&&(n(0,"div"),s(1,"Confirm password is required"),o())}function Le(e,d){e&1&&(n(0,"div"),s(1,"Passwords must match"),o())}function Ae(e,d){if(e&1&&(n(0,"div",19),m(1,qe,2,0,"div",20),m(2,Le,2,0,"div",20),o()),e&2){let t=u();r(1),a("ngIf",t.f.confirmPassword.errors==null?null:t.f.confirmPassword.errors.required),r(1),a("ngIf",t.f.confirmPassword.errors==null?null:t.f.confirmPassword.errors.mustMatch)}}function je(e,d){e&1&&(n(0,"div"),s(1,"Accept Terms is required"),o())}function ze(e,d){if(e&1&&(n(0,"div",19),m(1,je,2,0,"div",20),o()),e&2){let t=u();r(1),a("ngIf",t.f.acceptTerms.errors==null?null:t.f.acceptTerms.errors.required)}}function Ge(e,d){e&1&&p(0,"span",21)}var F=function(e){return{"is-invalid":e}},ce=(()=>{class e{constructor(t,l,i,C,J){this.formBuilder=t,this.route=l,this.router=i,this.accountService=C,this.alertService=J,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({title:["Mr",f.required],firstName:["",f.required],lastName:["",f.required],email:["",[f.required,f.email]],password:["",[f.required,f.minLength(6)]],confirmPassword:["",f.required],acceptTerms:[!0,f.requiredTrue]},{validator:D("password","confirmPassword")})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.register(this.form.value).pipe(h()).subscribe({next:()=>{this.alertService.success("Registration successful. Please check your email to verify your account.",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:t=>{this.alertService.error(t),this.loading=!1}}))}static{this.\u0275fac=function(l){return new(l||e)(c(V),c(T),c(P),c(_),c(R))}}static{this.\u0275cmp=v({type:e,selectors:[["ng-component"]],decls:35,vars:31,consts:[[1,"login-form",3,"formGroup","ngSubmit"],["id","title","formControlName","title",1,"form-control",3,"ngClass"],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control",3,"ngClass"],["type","text","id","firstName","formControlName","firstName","placeholder","First name",1,"form-control",3,"ngClass"],["type","text","id","lastName","formControlName","lastName","placeholder","Last name",1,"form-control",3,"ngClass"],["type","password","id","password","formControlName","password","placeholder","Create your password",1,"form-control",3,"ngClass"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",1,"form-control",3,"ngClass"],[1,"form-check"],["type","checkbox","id","acceptTerms","formControlName","acceptTerms",1,"form-check-input",3,"ngClass"],["for","acceptTerms",1,"form-check-label"],[1,"account-link"],["routerLink","../login"],["type","submit",1,"btn-submit",3,"disabled"],["class","spinner",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner"]],template:function(l,i){l&1&&(n(0,"form",0),b("ngSubmit",function(){return i.onSubmit()}),n(1,"h3"),s(2,"Signup"),o(),n(3,"select",1)(4,"option",2),s(5,"Mr"),o(),n(6,"option",3),s(7,"Mrs"),o(),n(8,"option",4),s(9,"Miss"),o(),n(10,"option",5),s(11,"Ms"),o()(),m(12,ye,2,1,"div",6),p(13,"input",7),m(14,ke,3,2,"div",6),p(15,"input",8),m(16,Ee,2,1,"div",6),p(17,"input",9),m(18,Re,2,1,"div",6),p(19,"input",10),m(20,Ve,3,2,"div",6),p(21,"input",11),m(22,Ae,3,2,"div",6),n(23,"div",12),p(24,"input",13),n(25,"label",14),s(26,"Accept Terms & Conditions"),o(),m(27,ze,2,1,"div",6),o(),n(28,"div",15),s(29," Already have an account? "),n(30,"a",16),s(31,"Sign in"),o()(),n(32,"button",17),m(33,Ge,1,0,"span",18),s(34," Signup "),o()()),l&2&&(a("formGroup",i.form),r(3),a("ngClass",g(17,F,i.submitted&&i.f.title.errors)),r(9),a("ngIf",i.submitted&&i.f.title.errors),r(1),a("ngClass",g(19,F,i.submitted&&i.f.email.errors)),r(1),a("ngIf",i.submitted&&i.f.email.errors),r(1),a("ngClass",g(21,F,i.submitted&&i.f.firstName.errors)),r(1),a("ngIf",i.submitted&&i.f.firstName.errors),r(1),a("ngClass",g(23,F,i.submitted&&i.f.lastName.errors)),r(1),a("ngIf",i.submitted&&i.f.lastName.errors),r(1),a("ngClass",g(25,F,i.submitted&&i.f.password.errors)),r(1),a("ngIf",i.submitted&&i.f.password.errors),r(1),a("ngClass",g(27,F,i.submitted&&i.f.confirmPassword.errors)),r(1),a("ngIf",i.submitted&&i.f.confirmPassword.errors),r(2),a("ngClass",g(29,F,i.submitted&&i.f.acceptTerms.errors)),r(3),a("ngIf",i.submitted&&i.f.acceptTerms.errors),r(5),a("disabled",i.loading),r(1),a("ngIf",i.loading))},dependencies:[S,w,k,ne,oe,y,te,ie,M,O,I,E,x],styles:["[_nghost-%COMP%]{display:block;height:100vh;background:#f5f5f5;position:relative;margin:0;padding:0}.login-form[_ngcontent-%COMP%]{width:100%;max-width:320px;background:white;border-radius:8px;box-shadow:0 2px 10px #00000014;padding:1.5rem;margin:0 auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-sizing:border-box}.login-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#333;font-size:1.2rem;font-weight:600;margin-bottom:1.5rem;margin-top:0}.login-form[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{background:rgba(244,63,94,.08);border:1px solid rgba(244,63,94,.18);color:#f43f5e;border-radius:4px;padding:.75rem;margin-bottom:1rem;width:100%;font-size:.9rem}.login-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;background:#f9f9f9;border:1px solid #e0e0e0;border-radius:4px;padding:.75rem 1rem;color:#333;font-size:.9rem;margin-bottom:1rem;transition:all .2s ease;box-sizing:border-box}.login-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#999}.login-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#009688;outline:none;box-shadow:0 0 0 2px #0096881a}.login-form[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#f43f5e;background:rgba(244,63,94,.03)}.login-form[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]{position:relative;width:100%}.login-form[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;right:.6rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#999;cursor:pointer;padding:.25rem;z-index:2;height:2rem;width:2rem;display:flex;align-items:center;justify-content:center;transition:color .2s}.login-form[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#009688}.login-form[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:focus{outline:none}.login-form[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:#f43f5e;font-size:.8rem;margin-top:-.75rem;margin-bottom:.75rem;padding-left:.25rem}.login-form[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]{text-align:right;margin-bottom:1rem}.login-form[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;text-decoration:none;font-size:.85rem;transition:color .2s}.login-form[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#009688}.login-form[_ngcontent-%COMP%]   .account-link[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:.85rem;margin-top:1rem}.login-form[_ngcontent-%COMP%]   .account-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#009688;text-decoration:none;transition:all .2s}.login-form[_ngcontent-%COMP%]   .account-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#00635a;text-decoration:underline}.login-form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{width:100%;background:#009688;color:#fff;border:none;border-radius:4px;padding:.75rem;font-size:.95rem;font-weight:500;cursor:pointer;transition:all .2s}.login-form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover{background:#007d71;box-shadow:0 2px 5px #0000001a}.login-form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:active{transform:translateY(1px)}.login-form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:disabled{background:#00fce4;cursor:not-allowed;transform:none;box-shadow:none}.login-form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:inline-block;width:1rem;height:1rem;border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-right:.5rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 400px){.login-form[_ngcontent-%COMP%]{width:90%;padding:1.25rem}}"]})}}return e})();function Be(e,d){e&1&&(n(0,"div"),s(1," Verifying... "),o())}function De(e,d){e&1&&(n(0,"div"),s(1," Verification failed, you can also verify your account using the "),n(2,"a",4),s(3,"forgot password"),o(),s(4," page. "),o())}var H=function(e){return e[e.Verifying=0]="Verifying",e[e.Failed=1]="Failed",e}(H||{}),pe=(()=>{class e{constructor(t,l,i,C){this.route=t,this.router=l,this.accountService=i,this.alertService=C,this.EmailStatus=H,this.emailStatus=H.Verifying}ngOnInit(){let t=this.route.snapshot.queryParams.token;this.router.navigate([],{relativeTo:this.route,replaceUrl:!0}),this.accountService.verifyEmail(t).pipe(h()).subscribe({next:()=>{this.alertService.success("Verification successful, you can now login",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:()=>{this.emailStatus=H.Failed}})}static{this.\u0275fac=function(l){return new(l||e)(c(T),c(P),c(_),c(R))}}static{this.\u0275cmp=v({type:e,selectors:[["ng-component"]],decls:7,vars:2,consts:[[1,"login-wrapper"],[1,"login-card"],[1,"form-header"],[4,"ngIf"],["routerLink","../forgot-password",1,"signup-link"]],template:function(l,i){l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),s(4,"Verify Email"),o()(),m(5,Be,2,0,"div",3),m(6,De,5,0,"div",3),o()()),l&2&&(r(5),a("ngIf",i.emailStatus==i.EmailStatus.Verifying),r(1),a("ngIf",i.emailStatus==i.EmailStatus.Failed))},dependencies:[w,x],encapsulation:2})}}return e})();function Ue(e,d){e&1&&(n(0,"div"),s(1,"Email is required"),o())}function Ye(e,d){e&1&&(n(0,"div"),s(1,"Please enter a valid email"),o())}function He(e,d){if(e&1&&(n(0,"div",11),m(1,Ue,2,0,"div",12),m(2,Ye,2,0,"div",12),o()),e&2){let t=u();r(1),a("ngIf",t.f.email.errors==null?null:t.f.email.errors.required),r(1),a("ngIf",t.f.email.errors==null?null:t.f.email.errors.email)}}function Je(e,d){e&1&&p(0,"span",13)}var Ke=function(e){return{"is-invalid":e}},fe=(()=>{class e{constructor(t,l,i){this.formBuilder=t,this.accountService=l,this.alertService=i,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({email:["",[f.required,f.email]]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.alertService.clear(),this.accountService.forgotPassword(this.f.email.value).pipe(h()).pipe(W(()=>this.loading=!1)).subscribe({next:()=>this.alertService.success("Please check your email for password reset instructions"),error:t=>this.alertService.error(t)}))}static{this.\u0275fac=function(l){return new(l||e)(c(V),c(_),c(R))}}static{this.\u0275cmp=v({type:e,selectors:[["ng-component"]],decls:20,vars:7,consts:[[1,"login-wrapper"],[1,"login-card"],[1,"form-header"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"form-group"],["type","email","id","email","formControlName","email","placeholder","Email address",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn-submit",3,"disabled"],["class","spinner",4,"ngIf"],[1,"form-footer"],["routerLink","../login",1,"signup-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner"]],template:function(l,i){l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),s(4,"Forgot Password"),o(),n(5,"p"),s(6,"Enter your email to receive reset instructions"),o()(),n(7,"form",3),b("ngSubmit",function(){return i.onSubmit()}),n(8,"div",4),p(9,"input",5),m(10,He,3,2,"div",6),o(),n(11,"button",7),m(12,Je,1,0,"span",8),n(13,"span"),s(14,"Send Reset Link"),o()(),n(15,"div",9)(16,"p"),s(17,"Remember your password? "),n(18,"a",10),s(19,"Sign In"),o()()()()()()),l&2&&(r(7),a("formGroup",i.form),r(2),a("ngClass",g(5,Ke,i.submitted&&i.f.email.errors)),r(1),a("ngIf",i.submitted&&i.f.email.errors),r(1),a("disabled",i.loading),r(1),a("ngIf",i.loading))},dependencies:[S,w,k,y,M,O,I,E,x],encapsulation:2})}}return e})();function Qe(e,d){e&1&&(n(0,"div"),s(1,"Password is required"),o())}function We(e,d){e&1&&(n(0,"div"),s(1,"Password must be at least 6 characters"),o())}function Xe(e,d){if(e&1&&(n(0,"div",14),m(1,Qe,2,0,"div",4),m(2,We,2,0,"div",4),o()),e&2){let t=u(2);r(1),a("ngIf",t.f.password.errors.required),r(1),a("ngIf",t.f.password.errors.minlength)}}function Ze(e,d){e&1&&(n(0,"div"),s(1,"Confirm Password is required"),o())}function $e(e,d){e&1&&(n(0,"div"),s(1,"Passwords must match"),o())}function et(e,d){if(e&1&&(n(0,"div",14),m(1,Ze,2,0,"div",4),m(2,$e,2,0,"div",4),o()),e&2){let t=u(2);r(1),a("ngIf",t.f.confirmPassword.errors.required),r(1),a("ngIf",t.f.confirmPassword.errors.mustMatch)}}function tt(e,d){e&1&&p(0,"span",15)}var ue=function(e){return{"is-invalid":e}};function it(e,d){if(e&1){let t=B();n(0,"form",5),b("ngSubmit",function(){z(t);let i=u();return G(i.onSubmit())}),n(1,"div",6),p(2,"input",7),m(3,Xe,3,2,"div",8),o(),n(4,"div",6),p(5,"input",9),m(6,et,3,2,"div",8),o(),n(7,"button",10),m(8,tt,1,0,"span",11),n(9,"span"),s(10,"Reset Password"),o()(),n(11,"div",12)(12,"a",13),s(13,"Cancel"),o()()()}if(e&2){let t=u();a("formGroup",t.form),r(2),a("ngClass",g(7,ue,t.submitted&&t.f.password.errors)),r(1),a("ngIf",t.submitted&&t.f.password.errors),r(2),a("ngClass",g(9,ue,t.submitted&&t.f.confirmPassword.errors)),r(1),a("ngIf",t.submitted&&t.f.confirmPassword.errors),r(1),a("disabled",t.loading),r(1),a("ngIf",t.loading)}}function nt(e,d){e&1&&(n(0,"div"),s(1,"Validating token..."),o())}function ot(e,d){e&1&&(n(0,"div"),s(1," Token validation failed, if the token has expired you can get a new one at the "),n(2,"a",16),s(3,"forgot password"),o(),s(4," page. "),o())}var L=function(e){return e[e.Validating=0]="Validating",e[e.Valid=1]="Valid",e[e.Invalid=2]="Invalid",e}(L||{}),ge=(()=>{class e{constructor(t,l,i,C,J){this.formBuilder=t,this.route=l,this.router=i,this.accountService=C,this.alertService=J,this.TokenStatus=L,this.tokenStatus=L.Validating,this.token=null,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({password:["",[f.required,f.minLength(6)]],confirmPassword:["",f.required]},{validator:D("password","confirmPassword")});let t=this.route.snapshot.queryParams.token;this.router.navigate([],{relativeTo:this.route,replaceUrl:!0}),this.accountService.validateResetToken(t).pipe(h()).subscribe({next:()=>{this.token=t,this.tokenStatus=L.Valid},error:()=>{this.tokenStatus=L.Invalid}})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.resetPassword(this.token,this.f.password.value,this.f.confirmPassword.value).pipe(h()).subscribe({next:()=>{this.alertService.success("Password reset successful, you can now login",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:t=>{this.alertService.error(t),this.loading=!1}}))}static{this.\u0275fac=function(l){return new(l||e)(c(V),c(T),c(P),c(_),c(R))}}static{this.\u0275cmp=v({type:e,selectors:[["ng-component"]],decls:10,vars:3,consts:[[1,"login-wrapper"],[1,"login-card"],[1,"form-header"],["class","login-form",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"form-group"],["type","password","formControlName","password","placeholder","New Password",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","confirmPassword","placeholder","Confirm New Password",1,"form-control",3,"ngClass"],[1,"btn-submit",3,"disabled"],["class","spinner",4,"ngIf"],[1,"form-footer"],["routerLink","../login",1,"signup-link"],[1,"invalid-feedback"],[1,"spinner"],["routerLink","../forgot-password",1,"signup-link"]],template:function(l,i){l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),s(4,"Reset Password"),o(),n(5,"p"),s(6,"Enter your new password below"),o()(),m(7,it,14,11,"form",3),m(8,nt,2,0,"div",4),m(9,ot,5,0,"div",4),o()()),l&2&&(r(7),a("ngIf",i.tokenStatus==i.TokenStatus.Valid),r(1),a("ngIf",i.tokenStatus==i.TokenStatus.Validating),r(1),a("ngIf",i.tokenStatus==i.TokenStatus.Invalid))},dependencies:[S,w,k,y,M,O,I,E,x],encapsulation:2})}}return e})();var rt=[{path:"",component:le,children:[{path:"login",component:de},{path:"register",component:ce},{path:"verify-email",component:pe},{path:"forgot-password",component:fe},{path:"reset-password",component:ge}]}],ve=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=j({type:e})}static{this.\u0275inj=A({imports:[K.forChild(rt),K]})}}return e})();var Jt=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=j({type:e})}static{this.\u0275inj=A({imports:[ee,ae,ve]})}}return e})();export{Jt as AccountModule};
