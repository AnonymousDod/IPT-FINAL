import{a as K}from"./chunk-IVTSPJUC.js";import{b as J}from"./chunk-5RCUSW7M.js";import{b as x}from"./chunk-7FSPOTPR.js";import{A as t,Aa as P,B as S,Ca as z,Ea as $,F as M,Fa as H,Ha as b,Ia as g,K as i,Ka as A,L as d,M as _,P as L,Q as F,Y as T,Z as R,ca as j,f as I,k as u,ka as w,la as m,ma as O,n as p,na as k,p as f,q as v,qa as q,sa as U,ta as V,u as a,ua as D,v as l,va as B,wa as G,x as h,y as c,z as e}from"./chunk-AFLXQZBF.js";import"./chunk-2XJVAMHT.js";function tt(r,E){r&1&&(e(0,"span",11),i(1,"Active"),t())}function et(r,E){r&1&&(e(0,"span",12),i(1,"Inactive"),t())}var it=function(r){return["edit",r]};function nt(r,E){if(r&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),t(),e(11,"td"),h(12,tt,2,0,"span",7),h(13,et,2,0,"span",8),e(14,"span",9),i(15),t()(),e(16,"td")(17,"a",10),i(18,"Edit"),t()()()),r&2){let n=E.$implicit;a(2),d(n.title),a(2),d(n.firstName),a(2),d(n.lastName),a(2),d(n.email),a(2),d(n.role),a(2),c("ngIf",n.status==="Active"),a(1),c("ngIf",n.status!=="Active"),a(2),_("(",n.status,")"),a(2),c("routerLink",F(9,it,n.id))}}var rt=function(){return["add"]},Q=(()=>{class r{constructor(n,o){this.accountService=n,this.router=o,this.router.events.pipe(I(s=>s instanceof $)).subscribe(()=>{this.loadAccounts()})}ngOnInit(){this.loadAccounts()}loadAccounts(){this.accountService.getAll().subscribe(n=>this.accounts=n)}static{this.\u0275fac=function(o){return new(o||r)(l(x),l(b))}}static{this.\u0275cmp=f({type:r,selectors:[["ng-component"]],decls:26,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","float-end",3,"routerLink"],["class","badge bg-success",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[2,"color","gray","font-size","10px"],[1,"btn","btn-primary",3,"routerLink"],[1,"badge","bg-success"],[1,"badge","bg-danger"]],template:function(o,s){o&1&&(e(0,"div",0)(1,"div",1),i(2,"ACCOUNTS"),t(),e(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead")(7,"tr")(8,"th"),i(9,"Title"),t(),e(10,"th"),i(11,"First Name"),t(),e(12,"th"),i(13,"Last Name"),t(),e(14,"th"),i(15,"Email"),t(),e(16,"th"),i(17,"Role"),t(),e(18,"th"),i(19,"Status"),t(),e(20,"th"),i(21,"Actions"),t()()(),e(22,"tbody"),h(23,nt,19,11,"tr",5),t()()(),e(24,"button",6),i(25,"Add Account"),t()()()),o&2&&(a(23),c("ngForOf",s.accounts),a(1),c("routerLink",L(2,rt)))},dependencies:[T,R,g],encapsulation:2})}}return r})();var N=(()=>{class r{constructor(n,o,s,y,X){this.formBuilder=n,this.route=o,this.router=s,this.accountService=y,this.alertService=X,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({title:["",m.required],firstName:["",m.required],lastName:["",m.required],email:["",[m.required,m.email]],role:["",m.required],status:["Active",m.required],password:["",[m.minLength(6),this.isAddMode?m.required:m.nullValidator]],confirmPassword:[""]},{validator:K("password","confirmPassword")}),this.isAddMode||this.accountService.getById(this.id).pipe(u()).subscribe(n=>{n.status||(n.status="Active"),this.form.patchValue(n)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createAccount():this.updateAccount())}createAccount(){this.accountService.create(this.form.value).pipe(u()).subscribe({next:()=>{this.alertService.success("Account created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:n=>{this.alertService.error(n),this.loading=!1}})}updateAccount(){this.accountService.update(this.id,this.form.value).pipe(u()).subscribe({next:()=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:n=>{this.alertService.error(n),this.loading=!1}})}static{this.\u0275fac=function(o){return new(o||r)(l(P),l(H),l(b),l(x),l(J))}}static{this.\u0275cmp=f({type:r,selectors:[["ng-component"]],decls:53,vars:3,consts:[[1,"card","mt-4"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row","mb-3"],[1,"col-md-2"],[1,"form-label"],["formControlName","title",1,"form-select"],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],[1,"col-md-5"],["type","text","formControlName","firstName",1,"form-control"],["type","text","formControlName","lastName",1,"form-control"],[1,"mb-3"],["type","email","formControlName","email",1,"form-control"],[1,"row","mb-4"],[1,"col-md-6"],["formControlName","role",1,"form-select"],["value","User"],["value","Admin"],["formControlName","status",1,"form-select"],["value","Active"],["value","Inactive"],[1,"text-center"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["routerLink","/admin/accounts",1,"btn","btn-secondary"]],template:function(o,s){o&1&&(e(0,"div",0)(1,"div",1)(2,"h4",2),i(3),t()(),e(4,"div",3)(5,"form",4),M("ngSubmit",function(){return s.onSubmit()}),e(6,"div",5)(7,"div",6)(8,"label",7),i(9,"Title"),t(),e(10,"select",8)(11,"option",9),i(12,"Mr"),t(),e(13,"option",10),i(14,"Mrs"),t(),e(15,"option",11),i(16,"Miss"),t(),e(17,"option",12),i(18,"Ms"),t()()(),e(19,"div",13)(20,"label",7),i(21,"First Name"),t(),S(22,"input",14),t(),e(23,"div",13)(24,"label",7),i(25,"Last Name"),t(),S(26,"input",15),t()(),e(27,"div",16)(28,"label",7),i(29,"Email"),t(),S(30,"input",17),t(),e(31,"div",18)(32,"div",19)(33,"label",7),i(34,"Role"),t(),e(35,"select",20)(36,"option",21),i(37,"User"),t(),e(38,"option",22),i(39,"Admin"),t()()(),e(40,"div",19)(41,"label",7),i(42,"Status"),t(),e(43,"select",23)(44,"option",24),i(45,"Active"),t(),e(46,"option",25),i(47,"Inactive"),t()()()(),e(48,"div",26)(49,"button",27),i(50,"Save"),t(),e(51,"a",28),i(52,"Cancel"),t()()()()()),o&2&&(a(3),d(s.isAddMode?"ADD ACCOUNT":"EDIT ACCOUNT"),a(2),c("formGroup",s.form),a(44),c("disabled",s.loading))},dependencies:[q,B,G,w,D,O,k,U,V,g],encapsulation:2})}}return r})();var ot=[{path:"",component:Q},{path:"add",component:N},{path:"edit/:id",component:N}],W=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=v({type:r})}static{this.\u0275inj=p({imports:[A.forChild(ot),A]})}}return r})();var Mt=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=v({type:r})}static{this.\u0275inj=p({imports:[j,z,W]})}}return r})();export{Mt as AccountsModule};
